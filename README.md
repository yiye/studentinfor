## StudentInfor##

**StudentInfor** 是一个方便大工软院学生查看学生周知和图书馆书目检索的平台.

###支持多种访问方式###
1.[移动web方式(`jQuery Mobile `)版](http://ssdlut.duapp.com)

2.微信版: 微信号(`ssdlut`)![二维码](https://github.com/yiye/studentinfor/commit/2afeb0d5f1643611a81ac71465a23af378c7c6bb)

3.安卓平台

###实现###

由于学校不提供开放的接口, 所以只好从页面抓取, 所以整个平台关键则技术就是`php`的`curl`了.

######学生周知

1.使用 `BAE` 的 `cron` 从早上8点到下午6点每隔两小时来触发 `cURL` 获取新闻列表,*因为学院每天发布周知只在白天发, 大部分学生,一般只是在飞上课时间查看学生周知,所以没必要太高的触发频率.*

2.将获取来的页面用正则表达式提取周知(id),和数据库中的最大id进行比较,从而得到一个新发布周知id列表.

3.根据这个新闻id列表再去获取周知详细内容,存入数据库.

4.在数据库中为根据用户的微信id,维护一个用户查看过得最新的周知id,每次用户查看周知时,会比较这个id,只将大于这个id的周知发送给用户,这样可以省下很多流量. 这年头流量什么的最宝贵了.
###图书检索
*因为学校已经有了一个手机web版的图书检索了所以这里只是实现了微信端的*

1.根据微信服务器发送来的书名,利用 `curl` 获取索结果.

2.利用正则表达式提取书名,索书号,出版信息,馆藏信息.

3.向用户返回前五条检索结果,其余的存入 `BAEmemcache` 中,如果用户觉得前五条没有她想要的结果的话, 可以继续查看. *大部分情况下对于检索结果只比较关注前几条,同时这样也可以省下很多流量*


